<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%><%String path = request.getContextPath();String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";%><%@taglib prefix="s" uri="/struts-tags" %> <!DOCTYPE html><html><head lang="en">    <title >尤克里里小站曲谱</title>    <link rel="stylesheet" href="<%=path %>/show/css/app.css" />    <link  href="<%=path %>/show/css/bootstrap-modal.css" rel="stylesheet"/>    <link href="<%=path %>/show/css/bootstrap-modal-bs3patch.css" rel="stylesheet"/></head><body>    <!-- .container-->    <div class="container relative clearfix ">        <article class="cart-info box ">            <header class="box-header clearfix">               <p>尤克里里论坛<span class="icon10"></span>                			<s:if test="#cart.type == 0" >	                       	【入门教程】	                       </s:if>	                       	<s:if test="#cart.type == 1" >	                       	【交流讨论】	                       </s:if>	                       <s:if test="#cart.type == 2" >	                       	【资料库】	                       </s:if>	                       <s:if test="#cart.type == 3" >	                       	【自扒普】	                       </s:if>	                       <s:if test="#cart.type == 4" >	                       	【转载】	                       </s:if> <s:property value="#cart.title" /> </p>            </header>            <!-- article 开始-->            <article class="box-body">                <section class="clearfix sectionpart">                    <div class="aside_left fl ">                        <p >查看：<s:property value="#cart.scanfCount" /> &nbsp; | 回复 ：<s:property value="#cart.comments.size()" />  <br />                            <span><s:property value="#cart.username" /></span>                        </p>                        <a href="#"><img src="<%=path %>/show/img/pictuew.png" alt="麦田华子吉他手" /></a>                    </div>                    <div class="aside_right fl cart" >                        <p class="cart_title">                        <s:if test="#cart.type == 0" >	                       	【入门教程】	                       </s:if>	                       	<s:if test="#cart.type == 1" >	                       	【交流讨论】	                       </s:if>	                       <s:if test="#cart.type == 2" >	                       	【资料库】	                       </s:if>	                       <s:if test="#cart.type == 3" >	                       	【自扒普】	                       </s:if>	                       <s:if test="#cart.type == 4" >	                       	【转载】	                       </s:if> <s:property value="#cart.title" />	                        <s:if test="#cart.top == 1">		                        	<span class="icon9"></span>		                        </s:if>		                        		                        <s:if test="#cart.scanfCount >= 100">		                        	<span class="icon8"></span>		                        </s:if>		                        		                        <s:if test="#cart.createdate.getTimes()">		                        	<span class="icon7"></span>		                        </s:if>		                        </p>                        <div class="clearfix aboutcreate">                            <ul class="fl ">                                <li class="fl"> 发布于 <s:property value="#cart.createdate" /></li>                                <li class="fl">|</li>                                <li class="fl">只看作者</li>                            </ul>                            <span class="fr">1楼</span>                        </div>                        <div class="cart-content">                            <s:property value="#cart.content" escapeHtml="false" />                        </div>                        <ul class="cartOperate clearfix">                            <li class="fl"><a href="#ride" class="replay"><span class="icon3"></span>回复</a></li>                            <li class="fl"><a href="#" class="bs_popover" data-url="<%=path %>/cart/update_topcount" data-send='cart.id=<s:property value="#cart.id" />'><span class="icon11"></span>支持</a></li>                            <li class="fl"><a href="#" class="bs_popover" data-url="<%=path %>/cart/update_bottomCount" data-send='cart.id=<s:property value="#cart.id" />'><span class="icon11"></span>反对</a></li>                            <li class="fr"><a href="#" class="bs_popover" data-url="<%=path %>/cart/update_danger" data-send='cart.id=<s:property value="#cart.id" />' >举报</a></li>                        </ul>                    </div>                </section>								<s:iterator value="#comments" var="comment" status="st">					<section class="clearfix sectionpart">	                    <div class="aside_left fl ">	                        <p ><s:property value="#comment.name" />	                        </p>	                        <a href="#"><img src="<%=path %>/show/img/pictuew.png" alt="<s:property value="#comment.name" />" /></a>	                    </div>	                    <div class="aside_right fl cart" >	                        <div class="clearfix aboutcreate">	                            <ul class="fl ">	                                <li class="fl"> 发布于<s:property value="#comment.createDate" /></li>	                                <li class="fl">|</li>	                                <li class="fl"><s:property value="#comment.name" /></li>	                            </ul>	                            <span class="fr"><s:property value="#st.index+2" />楼</span>	                        </div>	                        <div class="cart-content">	                            <s:property value="#comment.content" escapeHtml="false" />		                        </div>	                        <ul class="cartOperate clearfix">	                            <li class="fl"><a href="#ride" class="replay"><span class="icon3 "></span>回复</a></li>	                            <li class="fl"><a href="#" class="bs_popover" data-url="<%=path %>/comment/update_topCount" data-send='comment.id=<s:property value="#comment.id" />'><span class="icon11" ></span>支持</a></li>	                            <li class="fl"><a href="#" class="bs_popover" data-url="<%=path %>/comment/update_bottomCount" data-send='comment.id=<s:property value="#comment.id" />'><span class="icon11"></span>反对</a></li>	                            <li class="fr"><a href="#"  class="ol bs_popover" data-url="<%=path %>/comment/update_danger" data-send='comment.id=<s:property value="#comment.id" />' >举报</a></li>	                        </ul>		                    </div>	                </section>				</s:iterator>                            </article>        </article>        <!--  /.article 结束 -->        <div>            <p class="btn publish_cart_title"> 回复</p>            <div class="publish_cart_wraper clearfix">                <div class="fl aside_left"  >                </div>                <div class="fl aside_right" id="ride"  style="height:220px;background: #FFF">                    <form action="<%=path %>/comment/add" id="addcomment" class="publish_cart" >                        <div >                            <textarea name="comment.content"></textarea>                        </div>                        <button class="btn form_group" type="button" data-toggle="modal" data-target="#myModal"  >发表回复</button>                        <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >		                    <div class="modal-header">		                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>		                        <h4 class="modal-title" id="exampleModalLabel">临时昵称</h4>		                    </div>		                    <div class="modal-body">		                        	昵称：<input type="text"  class="form-control"  placeholder="昵称" name="comment.name"  required="required" /><br/>		                        	<input type="hidden" name="comment.cart.id" value='<s:property value="#cart.id" />'  />		                        			                    </div>		                    <div class="modal-footer">		                        <button type="button" class="btn" data-dismiss="modal">关闭</button>		                        <button type="submit" class="btn" >发送</button>		                    </div>		                </div>                    </form>                </div>            </div>        </div>    </div><!-- /.conatiner -->    <script src="<%=path %>/show/js/jquery.min.js"></script>     <script src="<%=path %>/show/js/boostrap-modal.js"></script>    <!-- Ckeditor 文本编辑器编辑 -->    <script type="text/javascript" src="<%=path %>/show/ckeditor/ckeditor.js"></script>        <script type="text/javascript" src="<%=path %>/show/js/app.js"></script>         <!-- 验证 -->    <script type="text/javascript" src="<%=path %>/show/js/jquery-html5Validate.js"></script>    <script>        var $section = $(".vedios section.vedio");        $($.map($section,function(oI){            if(($(oI).index()+1)%3==1){                return oI;            };        })).css('margin-left','0px');        $(".icon9").closest("p").css({        	"color":"#601986",        	"text-shadow":"0 0px .3px #601986"        	});        $(".icon8").closest("p").css({        	"color":"#E60012",        	"text-shadow":"0 0px .3px #601986"        	});        var oVedioCount = CKEDITOR.replace("comment.content",{        	toolbar :                [['Smiley']]        });       $(".aside_right").each(function(){           $(this).prev(".aside_left").outerHeight($(this).outerHeight());       });              $("#addcomment").html5Validate(function(){           $(this).submit();         });         $.testRemind.css = {           color: "#fff",           backgroundColor: "#f60",           "z-index":"200000"         };                  $(".bs_popover").on("click",function(e){        	e.preventDefault();        	 var $this = $(this);        	 $.ajax({        		 url:$(this).data("url"),        		 data:$(this).data("send"),        		 success:function(msg){        			 $this.showPopover(msg+"成功");        		 },        		 error:function(e){        			 $this.showPopover("操作失败");        		 }        	 });         });         $(".replay").on("click",function(e){        	 e.preventDefault();        	var $this = $(this);        	//alert($this.offset().top);        	$(window).scrollTop($(document).height());        	var index = $this.closest(".sectionpart").index()+1;        	$(window.frames[0].document).find("body").html("<p ><span style='color:#999'>回复"+index+"楼：</span>&nbsp;</p>");         });                      </script></body></html>